{% extends "base.html" %}
{% block body %}

<style type="text/css">
	.table th, .table td { 
     border-top: none !important; 
 }

</style>

<link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/css/bootstrap-multiselect.css" type="text/css"/>

<div style="width: 97.5%; margin-right: auto; margin-left: auto; margin-top: 2.5%; padding-bottom: 4%;">
<div class="panel panel-info">
    <div class="panel-heading">
        <h4 class="panel-title"><i class="fa fa-desktop"></i> Student Dashboard </h4>
    </div>
    <div class="panel-body row">
        <div class="creation-links col-lg-6 col-md-6 col-sm-6">

        	<div class="panel panel-primary">
	            <div class="panel-heading panel-heading-notif">Profile</div>
	            <div class="panel-body"> 

	            	<a href="#" id="btn1" style="position: relative; left: 75%;"> 
	            		<i class="fa fa-edit"></i> Edit Info
	            	</a>

	            	<div id="edit-info-form" class="modal">
                    <div class="modal-content">
                      <span class="close" id="close1">&times;</span>

                      <form class="form-horizontal" method="post" action="edit-profile/">
                      {% csrf_token %}
                      <div><p style="text-align: center; font-weight: bold; font-size: 24px; color: orange;"> 
                        Edit Info Form
                      </p></div>
                      	<div class="form-group">
                        <label class="control-label col-sm-3" for="f_name">First Name:</label>
                        <div class="col-sm-9"> 
                          <input type="text" class="form-control" id="f_name" name="fname">
                        </div>
                        </div>
                        <div class="form-group">
                        <label class="control-label col-sm-3" for="l_name">Last Name:</label>
                        <div class="col-sm-9"> 
                          <input type="text" class="form-control" id="l_name" name="lname">
                        </div>
                        </div>
                        <div class="form-group">
                        <label class="control-label col-sm-3" for="email">Email:</label>
                        <div class="col-sm-9"> 
                          <input type="email" class="form-control" id="email" name="email">
                        </div>
                        </div>
                        <div class="form-group"> 
                        <div class="col-sm-offset-3 col-sm-9">
                          <button type="submit" class="btn btn-primary" style="width: 100%;">Submit</button>
                        </div>
                      </div>
                      </form>

                    </div>
                    </div>
	               
				    <div style="width: 80%;">
					   <table class="table">
					    <tbody>
					      <tr>
					        <td>Name</td>
					        <td> : </td>
					        <td>{{student.user.first_name}} {{student.user.last_name}}</td>
					      </tr>
					      <tr>
					        <td>Email</td>
					        <td> : </td>
					        <td>{{student.user.email}} </td>
					        {% if err1 %}
					        <td style="color: red;"> {{err1}}</td>
					        {% endif %}
					      </tr>
					    </tbody>
					   </table>
					</div>

				    <a href="#" id="btn2" style="position: relative; left: 75%;"> 
            			<i class="fa fa-edit"></i> Edit Academic Info
	            	</a>

	            	<div id="edit-academic-info-form" class="modal">
                    <div class="modal-content">
                      <span class="close" id="close2">&times;</span>

                      <form class="form-horizontal" method="post" action="edit-academic-info/">
                      {% csrf_token %}
                      <div><p style="text-align: center; font-weight: bold; font-size: 24px; color: orange;"> 
                        Edit Academic Info Form
                      </p></div>
                        <div class="form-group">
                        <label class="control-label col-sm-3" for="clg">College:</label>
                        <div class="col-sm-9"> 
                          <select class="form-control" id="clg" name="clg">
                          {% for college in colleges %}
                          	<option value="{{college.id}}"> {{college.clg_name}} </option>
                          {% endfor %}
                          </select>
                        </div>
                        </div>
                        <div class="form-group">
                        <label class="control-label col-sm-3" for="dept">Depertment:</label>
                        <div class="col-sm-9"> 
                          <select class="form-control" id="dept" name="dept">
                          	{% for department in departments %}
                          		<option value="{{department.id}}"> {{department.name}} </option>
                          	{% endfor %}
                          </select>
                        </div>
                        </div>
                        <div class="form-group"> 
                        <div class="col-sm-offset-3 col-sm-9">
                          <button type="submit" class="btn btn-primary" style="width: 100%;">Submit</button>
                        </div>
                      </div>
                      </form>

                    </div>
                    </div>

		            <div style="width: 50%;">
	            	   <table class="table">
					    <tbody>
					      <tr>
					        <td>College</td>
					        <td> : </td>
					        <td>{{current_clg.college.clg_name}}</td>
					      </tr>
					      <tr>
					        <td>Depertment</td>
					        <td> : </td>
					        <td>{{current_clg.depertment.name}}</td>
					      </tr>
					    </tbody>
					  </table>
				    </div>

	            </div>
	        </div>

            <div class="panel panel-primary">
                <div class="panel-heading panel-heading-notif">Trainings</div>
                <div class="panel-body">

                    <h5>Upcoming</h5>
                    <ul>
                    {% if upcoming %}
                    {% for training in upcoming %}
                        <li><a href="#">{{ training.foss}}-{{training.start_date}}, created by {{training.organiser.user.username}}</a></li>
                    {% endfor %}
                    {% else %}
                    	<li> No upcoming Training</li>
                    {% endif %}
                    </ul>

                    <h5>Current </h5>
                    <ul>
                    {% if current %}
                    {% for training in current %}
                        <li><a>{{ training.foss}}-{{training.start_date}}, created by {{training.this_organiser.user.username}}</a></li>
                    {% endfor %}
                    {% else %}
                    	<li> No training done by you so far </li>
                    {% endif %}
                    </ul>

                </div>
            </div>

	        <div class="panel panel-primary">
	            <div class="panel-heading panel-heading-notif">Colleges</div>
	            <div class="panel-body">
	                <h5>Current</h5>
	                <ul>
	                    <li> {{current_clg.college.clg_name}} - {{current_clg.depertment.name}} </li>
	                </ul>
	                {% if past_clg %}
	                <h5>Past </h5>
	                <ul>
	                {% for clg in past_clg %} 
	                    <li> {{clg.college.clg_name}} - {{clg.depertment.name}} </li>
	                {% endfor %}
	                </ul>
	                {% endif %}
	            </div>
	        </div>

        </div>
    </div>
</div>

</div>



<script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/bootstrap-multiselect/0.9.13/js/bootstrap-multiselect.js"></script>




<style type="text/css">

.modal{ 
    display: none; /* Hidden by default */
    position: fixed; /* Stay in place */
    z-index: 1; /* Sit on top */
    left: 0;
    top: 0;
    width: 100%; /* Full width */
    height: 100%; /* Full height */
    margin: 0 auto;
    overflow: auto; /* Enable scroll if needed */
    background-color: rgb(0,0,0); /* Fallback color */
    background-color: rgba(0,0,0,0.4); /* Black w/ opacity */
}
/* Modal Content/Box */
.modal-content {
    background-color: #fefefe;
    margin: 15% auto;  /*15% from the top and centered */
    padding: 2%;
    border: 1px solid #888;
    width: 50%; /* Could be more or less, depending on screen size */
    /*height: 30%;*/
}

/* The Close Button */
.close {
    color: #aaa;
    float: right;
    font-size: 28px;
    font-weight: bold;
}

.close:hover,
.close:focus {
    color: black;
    text-decoration: none;
    cursor: pointer;
}
</style>


<script type="text/javascript">
    
    // Get the modal
    var modal1 = document.getElementById('edit-info-form');
    var modal2 = document.getElementById('edit-academic-info-form');

    // Get the button that opens the modal
    var btn1 = document.getElementById("btn1");
    var btn2 = document.getElementById("btn2");

    // Get the <span> element that closes the modal
    var span1 = document.getElementById("close1");
    var span2 = document.getElementById("close2");

    // When the user clicks on the button, open the modal 
    btn1.onclick = function() {
        modal1.style.display = "block";
    }
    btn2.onclick = function() {
        modal2.style.display = "block";
    }

    // When the user clicks on <span> (x), close the modal
    span1.onclick = function() {
        modal1.style.display = "none";
    }
    span2.onclick = function() {
        modal2.style.display = "none";
    }

    // When the user clicks anywhere outside of the modal, close it
    window.onclick = function(event) {
        if (event.target == modal1 || event.target == modal2) {
            modal1.style.display = "none";
            modal2.style.display = "none";
        }
    }

    $(document).ready(function() {
        $('#clg').multiselect({
        	buttonWidth: '100%',
        	maxHeight: 200,
        	filterPlaceholder: 'Search College...',
            includeSelectAllOption: true,
            enableCaseInsensitiveFiltering: true,
        });
        $('#dept').multiselect({
        	buttonWidth: '100%',
        	maxHeight: 200,
        	filterPlaceholder: 'Search Department...',
            includeSelectAllOption: true,
            enableCaseInsensitiveFiltering: true,
        });
    });

</script>

<script type="text/javascript">
	
	document.getElementById('f_name').value = '{{student.user.first_name}}';
    document.getElementById('l_name').value = '{{student.user.last_name}}';
    document.getElementById('email').value = '{{student.user.email}}';

    $("#dept option").filter(function() {
        return $(this).attr('value') == "{{current_clg.depertment.id}}";
    }).attr('selected', true);
    $("#clg option").filter(function() {
        return $(this).attr('value') == "{{current_clg.college.id}}";
    }).attr('selected', true);


</script>










{% endblock %}